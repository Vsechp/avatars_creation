<!DOCTYPE html>
<html>
<head>
    <title>Generate avatar</title>
    <style>
        body { font-family: Arial; max-width: 600px; margin: 20px auto; padding: 20px; }
        input, select { width: 100%; padding: 8px; margin: 5px 0; }
        button { background: #007bff; color: white; border: none; padding: 10px; cursor: pointer; }
        #result { margin-top: 20px; text-align: center; }
        .error { color: red; }
    </style>
</head>
<body>
    <h2>Generate avatar</h2>
    <select id="gender">
        <option value="man">Male</option>
        <option value="woman">Female</option>
    </select>
    <select id="ethnicity">
        <option value="asian">Asian</option>
        <option value="caucasian">European</option>
        <option value="african">African</option>
    </select>
    <input id="age" placeholder="Age (example: young, middle-aged, old)">
    <input id="expression" placeholder="Expression (example: smiling, serious)">
    <input id="details" placeholder="Details (example: glasses, beard)">
    <input id="profession" placeholder="Profession  (example: teacher, accountant, manager)">
    <button onclick="generateAvatar()">Generate</button>
    <div id="result"></div>

    <script>
        async function generateAvatar() {
            const gender = document.getElementById("gender").value;
            const ethnicity = document.getElementById("ethnicity").value;
            const age = document.getElementById("age").value;
            const expression = document.getElementById("expression").value;
            const details = document.getElementById("details").value;
            const profession = document.getElementById("profession").value;

            try {
                const response = await fetch("https://script.google.com/macros/s/AKfycby1jCTUofVpB7K4IQdB03hDtSle869cXKSPylzc62-CK6NoTsXFWDn2BasO61EdCUisSw/exec", {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ gender, ethnicity, age, expression, details, profession })
                });

                const data = await response.json();
                if (data.error) throw new Error(data.error);

                const img = document.createElement("img");
                img.src = data.url;
                img.style.width = "300px";
                document.getElementById("result").innerHTML = "";
                document.getElementById("result").appendChild(img);

            } catch (error) {
                document.getElementById("result").innerHTML = 
                    `<div class="error">Ошибка: ${error.message}</div>`;
            }
        }
    </script>
</body>
</html>
